# Apple Silicon (ARM64 / M1/M2/M3/M4) ONLY Configuration
# This configuration optimizes for Apple Silicon Macs exclusively

appId: com.wangfenghuan.w-next-ai-drawio
productName: W-Next AI Drawio (Apple Silicon)
artifactName: W-Next-AI-Drawio-AppleSilicon-${version}.${ext}

directories:
  output: dist
  buildResources: build

files:
  - out/**/*
  - electron/**/*
  - public/**/*
  - package.json
  - node_modules/**/*

# APPLE SILICON ONLY
mac:
  category: public.app-category.productivity
  target:
    - target: dmg
      arch: arm64
    - target: zip
      arch: arm64
  icon: build/icon.icns
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: build/entitlements.mac.plist
  entitlementsInherit: build/entitlements.mac.plist
  compression: maximum
  darkModeSupport: true
  # Minimum macOS version for Apple Silicon
  minimumSystemVersion: "11.0"
  # Optimize for Apple Silicon
  electronLanguages: ["zh-CN", "en"]

dmg:
  title: W-Next AI Drawio (Apple Silicon) ${version}
  artifactName: W-Next-AI-Drawio-AppleSilicon-${version}.${ext}
  sign: true

# Exclude x86/x64 binaries to reduce size
files:
  - "out/**/*"
  - "electron/**/*"
  - "public/**/*"
  - "package.json"
  - "node_modules/**/*"
  - "!node_modules/**/*x64/**/*"
  - "!node_modules/**/*ia32/**/*"
  - "!node_modules/**/*i686/**/*"

asar: true
nodeGypRebuild: false
npmRebuild: false

# Apple Silicon optimizations
arm64:
  appId: com.wangfenghuan.w-next-ai-drawio.arm64

publish:
  provider: generic
  url: null
